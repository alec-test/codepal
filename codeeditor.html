<!DOCTYPE>
<html>
	<head>
		<title>Code Editor</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- Stylesheets -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

		<!-- Styles -->
		<style type="text/css">
			#codeeditor #editor { 
				margin: auto;
				width: 100%;
				min-height: 200px;
			}
			#codeeditor .wordBreak {
				word-break: break-word;
			}
		</style>
	</head>
	<body>

		<!-- Main -->
		<section id="codeeditor" class="container">
			<!-- UI COMPONENT -->
			<div class="row">
				<div class="col-sm-6">
					<label for"filename">Filename</label>
					<input id="filename" type="text" />
					<span id="extension"></span>
					<button type="button" id="downloadBtn"><i class="fa fa-download"></i> Download</button>
					<button type="button" id="saveBtn"><i class="fa fa-save"></i> Save</button>
                    <button id="runBtn" type="button"> <i class="fa fa-play"> </i>Run</button>
				</div>
				<div class="col-sm-6 text-right">
					<button data-toggle="modal" data-target="#configModal" type="button" id="configBtn">
						<i class="fa fa-cog"></i> Custom Settings
					</button>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<ul id="tabContainer" class="nav nav-tabs" role="tablist">
						<li data-editoraction="add" role="editorInstance">
							<a role="tab" href="#"> + </a>
						</li>
					</ul>
					<div id="editor"></div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<select class="form-control" name="lang" id="lang">
						<option value="JavaScript">JavaScript (Node.js v4.4.3)</option>
						<option value="C#">C# (mono 4.2.3)</option>
						<option value="C++">C++ (g++ 4.8.4)</option>
						<option value="Haskell">Haskell (ghc 7.6.3)</option>
						<option value="Java">Java (openjdk 1.7.0_91)</option>
						<option value="Objective-C">Objective-C (clang 3.3)</option>
						<option value="Perl">Perl (perl 5.18.2)</option>
						<option value="Pascal">Pascal (fpc 2.6.2)</option>
						<option value="Python">Python (python 2.7.6)</option>
					</select>
				</div>
                <div class="col-sm-6">
                    <select class="form-control" name="theme" id="theme">
                    	<optgroup label="Light">
							<option value=chrome>Chrome</option>
							<option value=clouds>Clouds</option>
                    		<option value=crimson_editor>Crimson Editor</option>
	                        <option value=dawn>Dawn</option>
	                        <option value=dreamweaver>Dreamweaver</option>
	                        <option value=eclipse>Eclipse</option>
	                        <option value=github>Github</option>
                    		<option value=iplastic>iPlastic</option>
	                        <option value=katzenmilch>Katzenmilch</option>
	                        <option value=kuroir>Kuroir</option>
                    		<option value=solarized_light>Solarized Light</option>
                        	<option value=sqlserver>SQL Server</option>
                    		<option value=textmate>Textmate</option>
                        	<option value=tomorrow>Tomorrow</option>
                        	<option value=xcode>XCode</option>
                    	</optgroup>
                    	<optgroup label="Dark">
                    		<option value=ambiance>Ambiance</option>
                    		<option value=chaos>Chaos</option>
                    		<option value=clouds_midnight>Clouds Midnight</option>
                        	<option value=cobalt>Cobalt</option>
                        	<option value=monokai>Monokai</option>
                        	<option value=idle_fingers>Idle Fingers</option>
                        	<option value=merbivore>Merbivore</option>
	                        <option value=merbivore_soft>Merbivore Soft</option>
	                        <option value=paster_on_dark>Paster On Dark</option>
	                        <option value=solarized_dark>Solarized Dark</option>
                    		<option value=terminal>Terminal</option>
                    		<option value=tomorrow_night>Tomorrow Night</option>
	                        <option value=tomorrow_night_blue>Tomorrow Night Blue</option>
	                        <option value=tomorrow_night_bright>Tomorrow Night Bright</option>
	                        <option value=tomorrow_night_eighties>Tomorrow Night Eighties</option>
	                        <option value=twilight>Twilight</option>
	                        <option value=vibrant_ink>Vibrant Ink</option>
                    	</optgroup>
                    </select>
                </div>
				
			</div>
			<div class="row">
				<div class="col-xs-12">
					<div id="outConsole" class="jumbotron wordBreak">
                        <h3>Output:</h3>
                    </div>
				</div>
			</div>
			<!-- / UI COMPONENT -->

			<!-- CONFIG MODAL -->
			<div class="modal" id="configModal" tabindex="-1" role="dialog" aria-labelledby="configModalLabel">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title" id="configModalLabel">Custom Settings</h4>
						</div>
						<div class="modal-body">
							<div class="row">
								<div class="col-md-6">Tab Size</div>
								<div class="col-md-6">
									<input type="number" class="form-control" />
								</div>
								
								<div class="col-md-6">Font Size</div>
								<div class="col-md-6">
									<input type="number" class="form-control" />
								</div>
								
								
								<!-- 
									TODO:
									- Allow user to change the following parameters
										- tab size
										- font size
					
									- Allow user to have custom key bindings for
										- GOTO line
										- SEARCH (save last used phrase)
										- REPLACE 
									- (utilize https://bootstrap-tagsinput.github.io/bootstrap-tagsinput/examples/)
								-->
							</div>
						</div>
						<div class="modal-footer">
							<button id="configSave" type="button" class="btn btn-primary">
								<i class="fa fa-save"></i>  Save Changes
							</button>
						</div>
					</div>
				</div>
			</div>
			<!-- /. CONFIG MODAL -->

		</section>

		<!-- Third Party Libraries -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
		<script type="text/javascript" src="ace/ace.js" data-ace-base="ace" charset="utf-8"></script>
        
		<!-- Local Scripts -->
		<script type="text/javascript" src="js/main.js"></script>
		<script type="text/javascript" src="js/util.js"></script>
		<script type="text/javascript" src="js/editor.js"></script>
		<script type="text/javascript" src="js/execute.js"></script>
		<script type="text/javascript" src="js/ui.js"></script>

		<!--
			For local testing:
			http://stackoverflow.com/questions/20035101/no-access-control-allow-origin-header-is-present-on-the-requested-resource

			Good comparison of features and UI:
			https://www.codechef.com/ide

			Demo for searching across multiple sessions
			http://embed.plnkr.co/60xwqi/

			Nice to have Optional Features:
			- Split window view
			- Tabs (multiple instances)
			- Import file?
		-->

		<!-- Main Script -->
		<script type="text/javascript">
			
			var codeEditor; // global class instance

			$(document).ready(function() {

				codeEditor = new CodeEditor({
					eleId		: 'editor',
					lang 		: 'JavaScript',
					execute		: {
						$outConsole		: $('#outConsole'),
					},
					editor 		: {
						$filename 		: $('#filename'),
						$extension		: $('#extension'),
						theme 			: 'monokai'
					},
					ui   		: {
						$tabContainer	: $('#tabContainer')
					}	
				});

				// Bindings
				$('[data-editoraction="add"]').click(codeEditor.editor.createNewSession);

				$('#codeeditor #runBtn').click(function() {
					$(this).prop('disabled', true);
					codeEditor.execute.run($(this));
				});
				$('#codeeditor #saveBtn').click(function() { // TODO: Hook up
					alert('Code snippet save feature -- coming soon...');
				});
				$('#codeeditor #downloadBtn').click(codeEditor.editor.download);
				$('#codeeditor #lang').on('change', function() {
					var lang = $(this).find('option:selected').val();
					codeEditor.editor.setEditorLang(lang);
				});
				$('#theme').on('change', function () {
				    var theme = $(this).find('option:selected').val();
				    codeEditor.editor.setEditorTheme(theme);
				});

			});

		</script>
	</body>
</html>
